#!/usr/bin/make -f

ifneq ($(wildcard /etc/gdm/gdm.conf-custom),)
    GDM_CONFFILE = /etc/gdm/gdm.conf-custom.debathena
    DEB_DH_LINK_ARGS_debathena-gdm-config=/etc/gdm/gdm.conf-custom.debathena /etc/gdm/gdm.conf.debathena
else
    GDM_CONFFILE = /etc/gdm/gdm.conf.debathena
endif

DEB_DIVERT_EXTENSION = .debathena
DEB_TRANSFORM_FILES_debathena-gdm-config += \
	${GDM_CONFFILE}
DEB_TRANSFORM_SCRIPT_${GDM_CONFFILE} = debian/transform_gdm.conf.debathena
DEB_DIVERT_FILES_debathena-gdm-config += \
	/etc/gdm/PreSession/Default.debathena \
	/etc/gdm/PostSession/Default.debathena \
	/usr/share/gdm/BuiltInSessions/default.desktop.debathena
DEB_REMOVE_FILES_debathena-gdm-config += \
	/usr/share/xsessions/ssh.desktop
include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/rules/config-package.mk

common-build-indep:: debathena/distro.svg

debathena/distro.svg: debian/distro.svg.sh
	sh $< > $@

clean::
	-rm debathena/distro.svg
